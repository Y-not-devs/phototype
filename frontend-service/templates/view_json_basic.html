<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ filename }} - Phototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/json-basic.css') }}">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace']
                    },
                    colors: {
                        primary: '#3b82f6',
                        accent: '#10b981'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900 min-h-screen font-sans text-gray-100">
    <div class="container mx-auto max-w-6xl px-4 py-8">
        <!-- Header -->
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center">
                <a href="{{ url_for('main.index') }}" 
                   class="bg-gray-700 hover:bg-gray-600 text-gray-100 p-3 rounded-lg mr-4 transition-colors duration-200 shadow-lg border border-gray-600">
                    <span class="material-symbols-outlined">arrow_back</span>
                </a>
                <div>
                    <h1 class="text-3xl font-bold text-gray-100 mb-1">{{ filename }}</h1>
                    <p class="text-gray-400 flex items-center">
                        <span class="material-symbols-outlined mr-2 text-accent">data_object</span>
                        Contract Data Visualization - Phototype
                    </p>
                </div>
            </div>
            <div class="flex space-x-3">
                <a href="{{ url_for('main.api_get_json', filename=filename) }}" 
                   class="bg-primary hover:bg-blue-600 text-white px-5 py-3 rounded-lg transition-colors duration-200 flex items-center shadow-lg">
                    <span class="material-symbols-outlined mr-2">download</span>
                    Download JSON
                </a>
            </div>
        </div>

        <!-- JSON Content -->
        <div class="bg-gray-800 rounded-lg shadow-2xl border border-gray-700 p-6">
            <div class="json-container">
                {% macro render_json_value(value, key=None, depth=0) %}
                    {% if value is mapping %}
                        {% if key %}
                            <div class="json-field" style="margin-left: 20px;">
                                <span class="json-key">"{{ key }}"</span><span class="json-colon">:</span> <span class="json-brace"></span>
                            </div>
                        {% else %}
                            <div class="json-brace">{</div>
                        {% endif %}
                        {% for k, v in value.items() %}
                            {{ render_json_value(v, k, depth + 1) }}
                            {% if not loop.last %}<span class="json-comma">,</span>{% endif %}
                        {% endfor %}
                        <div style="margin-left: 20px;"><span class="json-brace">}</span></div>
                    {% elif value is iterable and value is not string %}
                        {% if key %}
                            <div class="json-field" style="margin-left: 20px;">
                                <span class="json-key">"{{ key }}"</span><span class="json-colon">:</span> <span class="json-brace">[</span>
                            </div>
                        {% else %}
                            <div class="json-brace">[</div>
                        {% endif %}
                        {% for item in value %}
                            {{ render_json_value(item, depth=depth + 1) }}
                            {% if not loop.last %}<span class="json-comma">,</span>{% endif %}
                        {% endfor %}
                        <div style="margin-left: 20px;"><span class="json-brace">]</span></div>
                    {% else %}
                        <div class="json-field" style="margin-left: 20px;">
                            {% if key %}
                                <span class="json-key">"{{ key }}"</span><span class="json-colon">:</span> 
                            {% endif %}
                            {% if value is string %}
                                <span class="json-string">"{{ value }}"</span>
                            {% elif value is number %}
                                <span class="json-number">{{ value }}</span>
                            {% elif value is sameas true or value is sameas false %}
                                <span class="json-boolean">{{ value|lower }}</span>
                            {% elif value is none %}
                                <span class="json-null">null</span>
                            {% else %}
                                <span class="json-string">"{{ value }}"</span>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endmacro %}

                {{ render_json_value(data) }}
            </div>
        </div>
    </div>
</body>
</html>